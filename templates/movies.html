{% extends "base.html" %}

{% block content %}

<h1 class="titles">{{ user.name }}'s Movies</h1>

<div class="movies-wrapper">
    <div class="movies-grid">
        {% for movie in movies %}
        <div class="movie-card">
            <img class="movie-poster"
                src="{{ movie.poster_url }}"
                title="{{ movie.title }}"/>
            <form action="{{ url_for('update_movie', user_id=user.id, movie_id=movie.id) }}" method="post">
                <input type="text" name="title" value="{{ movie.title }}" required>
                <button type="submit">Update</button>
            </form>
            <p><strong>Year</strong>: {{ movie.year }}</p>
            <p><strong>Director</strong>: {{ movie.director or "Unknown" }}</p>

            <form action="{{ url_for('delete_movie', user_id=user.id, movie_id=movie.id) }}" method="post">
                <button type="submit" onclick="return confirm('Are you sure you want to delete this movie?');">Delete</button>
            </form>
        </div>
        {% endfor %}
    </div>


    <div class="add-movie-card">
        <form action="{{ url_for('add_movie', user_id=user.id) }}" method="post">
            <h3>Add New Movie</h3>
            <input type="text" name="title" placeholder="Movie title" required>
            <button type="submit">Add Movie</button>
        </form>
    </div>


    <p>
        <a href="{{ url_for('index') }}">‚Üê Back to users</a>
    </p>
</div>
{% endblock %}